{"title":"JDBC","slug":"JDBC","date":"2018-08-03T03:05:54.000Z","updated":"2018-08-19T12:01:38.451Z","comments":true,"excerpt":"","content":"<h1 id=\"JDBC-Java-DataBase-Connection-程序的创建步骤：\"><a href=\"#JDBC-Java-DataBase-Connection-程序的创建步骤：\" class=\"headerlink\" title=\"JDBC(Java DataBase Connection)程序的创建步骤：\"></a>JDBC(Java DataBase Connection)程序的创建步骤：</h1><h2 id=\"1-加载JDBC驱动程序\"><a href=\"#1-加载JDBC驱动程序\" class=\"headerlink\" title=\"1.加载JDBC驱动程序\"></a>1.加载JDBC驱动程序</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Class.forName(com.mysql.jdbc.Driver)</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-提供JDBC连接的URL\"><a href=\"#2-提供JDBC连接的URL\" class=\"headerlink\" title=\"2.提供JDBC连接的URL\"></a>2.提供JDBC连接的URL</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String url=<span class=\"string\">\"jdbc:mysql://localhost:3306/db_shop\"</span>;</span><br><span class=\"line\">String username=<span class=\"string\">\"root\"</span>;</span><br><span class=\"line\">String password=<span class=\"string\">\"root\"</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"3-创建数据库连接\"><a href=\"#3-创建数据库连接\" class=\"headerlink\" title=\"3.创建数据库连接\"></a>3.创建数据库连接</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Connedtion conn=DriverManager.getConnection(url,username,password);</span><br></pre></td></tr></table></figure>\n<h2 id=\"4-创建一个Statement\"><a href=\"#4-创建一个Statement\" class=\"headerlink\" title=\"4.创建一个Statement\"></a>4.创建一个Statement</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Statement stmt=conn.createStatement();</span><br></pre></td></tr></table></figure>\n<h2 id=\"5-执行SQL语句\"><a href=\"#5-执行SQL语句\" class=\"headerlink\" title=\"5.执行SQL语句\"></a>5.执行SQL语句</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String sql=<span class=\"string\">\"select * from user\"</span>;</span><br><span class=\"line\">ResultSet rs=stmt.executeQuery(sql);</span><br></pre></td></tr></table></figure>\n<h2 id=\"6-处理结果\"><a href=\"#6-处理结果\" class=\"headerlink\" title=\"6.处理结果\"></a>6.处理结果</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> id=rs.getInt(<span class=\"string\">\"id\"</span>);</span><br><span class=\"line\">    String name=rs.getString(<span class=\"string\">\"username\"</span>);</span><br><span class=\"line\">    String psw=rs.getString(<span class=\"string\">\"password\"</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span>(ClassNotFoundException e)&#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"7-关闭JDBC对象\"><a href=\"#7-关闭JDBC对象\" class=\"headerlink\" title=\"7.关闭JDBC对象\"></a>7.关闭JDBC对象</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    rs.close();</span><br><span class=\"line\">    rs=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">    stmt.close();</span><br><span class=\"line\">    stmt=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">    conn.close();</span><br><span class=\"line\">    conn=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">catch</span>(SQLException e)&#123;</span><br><span class=\"line\">    e.printStackTrace();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"完整的程序\"><a href=\"#完整的程序\" class=\"headerlink\" title=\"完整的程序\"></a>完整的程序</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.mysql.*;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JDBCExample01</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException, ClassNotFoundException </span>&#123;</span><br><span class=\"line\">    Class.forName(<span class=\"string\">\"com.mysql.jdbc.Driver\"</span>);</span><br><span class=\"line\">    String url=<span class=\"string\">\"jdbc:mysql://localhost:3306/db_shop\"</span>;</span><br><span class=\"line\">    String username=<span class=\"string\">\"root\"</span>;</span><br><span class=\"line\">    String password=<span class=\"string\">\"root\"</span>;</span><br><span class=\"line\">    Connection conn = DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">    Statement stmt=conn.createStatement();</span><br><span class=\"line\">    String sql=<span class=\"string\">\"select * from users\"</span>;</span><br><span class=\"line\">    ResultSet rs=stmt.executeQuery(sql);</span><br><span class=\"line\">    System.out.println(rs.getString(<span class=\"string\">\"id\"</span>));</span><br><span class=\"line\">    System.out.println(rs.getString(<span class=\"string\">\"username\"</span>));</span><br><span class=\"line\">    System.out.println(rs.getString(<span class=\"string\">\"password\"</span>));</span><br><span class=\"line\">    rs.close();</span><br><span class=\"line\">    rs=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">    stmt.close();</span><br><span class=\"line\">    stmt=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">    conn.close();</span><br><span class=\"line\">    conn=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"使用prepareStatement类\"><a href=\"#使用prepareStatement类\" class=\"headerlink\" title=\"使用prepareStatement类\"></a>使用prepareStatement类</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.*;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"keyword\">static</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> throw SQLException</span>&#123;</span><br><span class=\"line\">        Class.forName(<span class=\"string\">\"com.mysql.jdbc.Driver\"</span>);</span><br><span class=\"line\">        String url=<span class=\"string\">\"jdbc:mysql://localhost:3306/db_shop\"</span>;</span><br><span class=\"line\">        String username=<span class=\"string\">\"root\"</span>;</span><br><span class=\"line\">        String password=<span class=\"string\">\"root\"</span>;</span><br><span class=\"line\">        conn=DriverManager.getConnection(url,username,password);</span><br><span class=\"line\">        String sql=<span class=\"string\">\"INSERT INTO user(name,password,email)\"</span>+<span class=\"string\">\"VALUE(?,?,?)\"</span>;</span><br><span class=\"line\">        preStmt=conn.PrepareStatement(sql);</span><br><span class=\"line\">        preStmt=setString(<span class=\"number\">1</span>,<span class=\"string\">\"zl\"</span>);</span><br><span class=\"line\">        preStmt=setString(<span class=\"number\">2</span>,<span class=\"string\">\"12345\"</span>);</span><br><span class=\"line\">        preStmt=setString(<span class=\"number\">3</span>,<span class=\"string\">\"zl@foxmain.com\"</span>);</span><br><span class=\"line\">        preStmt.executeUpdate();</span><br><span class=\"line\">        preStmt.close();</span><br><span class=\"line\">        preStmt=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">        conn.close();</span><br><span class=\"line\">        conn=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"笔记","path":"api/categories/笔记.json"}],"tags":[{"name":"笔记","path":"api/tags/笔记.json"},{"name":"javaweb","path":"api/tags/javaweb.json"},{"name":"JDBC","path":"api/tags/JDBC.json"}]}